<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Edit Product</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.14/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 text-gray-800">
    <div class="container mx-auto py-8">
      <h1 class="text-3xl font-semibold text-center mb-6 text-lime-600">Edit Product</h1>

      <form action="/seller/product/<%= product.id %>/edit" method="POST" class="bg-white shadow-md rounded-md p-6 max-w-lg mx-auto">
        <!-- Product Name -->
        <div class="mb-4">
          <label for="name" class="block text-gray-700 font-bold mb-2">Product Name</label>
          <input type="text" name="name" value="<%= product.name %>" class="input input-bordered w-full bg-white" />
          <% if (errors && errors.includes("Product name can't be empty.")) { %>
            <p class="text-red-500 text-sm mt-1">Product name can't be empty.</p>
          <% } %>
        </div>

        <!-- Price -->
        <div class="mb-4">
          <label for="price" class="block text-gray-700 font-bold mb-2">Price (Rp)</label>
          <input type="number" name="price" value="<%= product.price %>" class="input input-bordered w-full bg-white" />
          <% if (errors && errors.includes("Price can't be empty.")) { %>
            <p class="text-red-500 text-sm mt-1">Price can't be empty.</p>
          <% } %>
          <% if (errors && errors.includes("Price needs to be a number.")) { %>
            <p class="text-red-500 text-sm mt-1">Price needs to be a valid number.</p>
          <% } %>
          <% if (errors && errors.includes("Price must be a valid number and above 0.")) { %>
            <p class="text-red-500 text-sm mt-1">Price must be a valid number and above 0.</p>
          <% } %>
        </div>

        <!-- Stock -->
        <div class="mb-4">
          <label for="stock" class="block text-gray-700 font-bold mb-2">Stock Quantity</label>
          <input type="text" name="stock" value="<%= product.stock %>" class="input input-bordered w-full bg-white" />
          <% if (errors && errors.includes("Stock can't be empty.")) { %>
            <p class="text-red-500 text-sm mt-1">Stock can't be empty.</p>
            <% } %>
             <% if (errors && errors.includes("Stock needs to be a number.")) { %>
            <p class="text-red-500 text-sm mt-1">Stock needs to be a valid number.</p>
            <% } %>
             <% if (errors && errors.includes("Stock must be a valid number and above 0.")) { %>
            <p class="text-red-500 text-sm mt-1">Stock must be a valid number and above 0.</p>
            <% } %>
        </div>

        <!-- Category -->
        <div class="mb-4">
          <label for="CategoryId" class="block text-gray-700 font-bold mb-2">Category</label>
          <select name="CategoryId" class="select select-bordered w-full bg-white">
            <option selected hidden disabled>Select the Category</option>
            <% categories.forEach((category) => { %>
              <option value="<%= category.id %>" <%= product.CategoryId === category.id ? "selected" : "" %> >
                <%= category.name %>
              </option>
            <% }); %>
          </select>
          <% if (errors && errors.includes("Category can't be empty")) { %>
            <p class="text-red-500 text-sm mt-1">Category can't be empty.</p>
          <% } %>
        </div>

        <!-- Product Image -->
        <div class="mb-4">
          <label class="block text-gray-700 font-bold mb-2">Product Image</label>
          <input type="text" name="productImg" value="<%= product.productImg %>" class="file-input file-input-bordered w-full bg-white" />
          <% if (errors && errors.includes("Product image can't be empty.")) { %>
            <p class="text-red-500 text-sm mt-1">Product image can't be empty.</p>
          <% } %>
          <% if (errors && errors.includes("Product image needs to be a proper URL type.")) { %>
            <p class="text-red-500 text-sm mt-1">Product image needs to be a proper URL.</p>
          <% } %>
        </div>

        <!-- Description -->
        <div class="mb-4">
          <label for="description" class="block text-gray-700 font-bold mb-2">Description</label>
          <textarea name="description" rows="3" class="textarea textarea-bordered w-full bg-white"><%= product.description %></textarea>
          <% if (errors && errors.includes("Description can't be empty.")) { %>
            <p class="text-red-500 text-sm mt-1">Description can't be empty.</p>
          <% } %>
        </div>

        <!-- Buttons -->
        <div class="flex justify-between items-center">
          <a href="/home" class="btn bg-yellow-400 text-white hover:bg-yellow-500 transition-all duration-300 ease-in-out transform hover:scale-105 rounded-full px-8 py-3 shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-yellow-500"> Back </a>
          <button type="submit" class="btn bg-lime-600 text-white hover:bg-lime-700 transition-all duration-300 ease-in-out transform hover:scale-105 rounded-full px-8 py-3 shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-lime-500">Update Product</button>
        </div>
      </form>
    </div>
  </body>
</html>